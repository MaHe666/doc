<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<meta name="qrichtext" content="1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
p, li { white-space: pre-wrap; }
</style>
</head>
<body style="font-family:'微软雅黑'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="margin:0px;">在 Python 中，使用了 yield 的函数被称为生成器（generator）。</p>
<p style="margin:0px;">跟普通函数不同的是，生成器是一个用于创建迭代器的简单而强大的工具，是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</p>
<p style="margin:0px;">它们的写法类似于标准的函数，但当它们要返回数据时会使用 yield 语句。 </p>
<p style="margin:0px;">在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p>
<p style="margin:0px;">调用一个生成器函数，返回的是一个迭代器对象。</p>
<p style="margin:0px;">一个显示如何非常容易地创建生成器的示例如下:</p>
<p style="margin:0px;">def reverse(data):</p>
<p style="margin:0px;">    for index in range(len(data)-1, -1, -1):</p>
<p style="margin:0px;">        yield data[index]</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">for char in reverse('golf'):</p>
<p style="margin:0px;">    print(char)</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">可以用生成器来完成的操作同样可以用前一节所描述的基于类的迭代器来完成。 但生成器的写法更为紧凑，因为它会自动创建 __iter__() 和 __next__() 方法。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">另一个关键特性在于局部变量和执行状态会在每次调用之间自动保存。 这使得该函数相比使用 self.index 和 self.data 这种实例变量的方式更易编写且更为清晰。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">除了会自动创建方法和保存程序状态，当生成器终结时，它们还会自动引发 StopIteration。 这些特性结合在一起，使得创建迭代器能与编写常规函数一样容易。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">以下实例使用 yield 实现斐波那契数列：</p>
<p style="margin:0px;"> </p>
<p style="margin:0px;">import sys</p>
<p style="margin:0px;"> </p>
<p style="margin:0px;">def fibonacci(n): # 生成器函数 - 斐波那契</p>
<p style="margin:0px;">    a, b, counter = 0, 1, 0</p>
<p style="margin:0px;">    while True:</p>
<p style="margin:0px;">        if (counter &gt; n): </p>
<p style="margin:0px;">            return</p>
<p style="margin:0px;">        yield a</p>
<p style="margin:0px;">        a, b = b, a + b</p>
<p style="margin:0px;">        counter += 1</p>
<p style="margin:0px;">f = fibonacci(10) # f 是一个迭代器，由生成器返回生成</p>
<p style="margin:0px;"> </p>
<p style="margin:0px;">while True:</p>
<p style="margin:0px;">    try:</p>
<p style="margin:0px;">        print (next(f), end=&quot; &quot;)</p>
<p style="margin:0px;">    except StopIteration:</p>
<p style="margin:0px;">        sys.exit()</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>

<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body>
</html>