<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<meta name="qrichtext" content="1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
p, li { white-space: pre-wrap; }
</style>
</head>
<body style="font-family:'微软雅黑'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="margin:0px;">下例演示了如何引用不同作用域和名称空间，以及 global 和 nonlocal 对变量绑定的影响：</p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> scope_test():</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> do_local():</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        spam = </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;local spam&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> do_nonlocal():</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">nonlocal</span><span style="font-family:'Courier';"> spam</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        spam = </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;nonlocal spam&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> do_global():</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">global</span><span style="font-family:'Courier';"> spam</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        spam = </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;global spam&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    spam = </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;test spam&quot;</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    do_local()</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">print</span><span style="font-family:'Courier';">(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;After local assignment:&quot;</span><span style="font-family:'Courier';">, spam)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    do_nonlocal()</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">print</span><span style="font-family:'Courier';">(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;After nonlocal assignment:&quot;</span><span style="font-family:'Courier';">, spam)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    do_global()</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">print</span><span style="font-family:'Courier';">(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;After global assignment:&quot;</span><span style="font-family:'Courier';">, spam)</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">scope_test()</span></p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#204a87;">print</span><span style="font-family:'Courier';">(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">&quot;In global scope:&quot;</span><span style="font-family:'Courier';">, spam)</span></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">示例代码的输出是：</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">After local assignment: test spam</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">After </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">nonlocal</span><span style="font-family:'Courier';"> assignment: </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">nonlocal</span><span style="font-family:'Courier';"> spam</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">After </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">global</span><span style="font-family:'Courier';"> assignment: </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">nonlocal</span><span style="font-family:'Courier';"> spam</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">In </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">global</span><span style="font-family:'Courier';"> scope: </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">global</span><span style="font-family:'Courier';"> spam</span></p>
<p style="margin:0px;">注意，局部 赋值（这是默认状态）不会改变 scope_test 对 spam 的绑定。 nonlocal 赋值会改变 scope_test 对 spam 的绑定，而 global 赋值会改变模块层级的绑定。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">而且，global 赋值前没有 spam 的绑定。</p>

<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body>
</html>