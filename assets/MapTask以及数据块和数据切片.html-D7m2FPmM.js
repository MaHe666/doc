import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,o as t,f as p}from"./app-CBl934tH.js";const o={},s=p('<h2 id="maptask" tabindex="-1"><a class="header-anchor" href="#maptask"><span>MapTask</span></a></h2><p>MapTask指的是在MapReduce运行过程中为每一个数据切片分配的数据运算实例任务。MapTask的并行度也就指的是运算任务实例的数量，影响整个job的处理速度。</p><h3 id="maptask-并行度决定机制" tabindex="-1"><a class="header-anchor" href="#maptask-并行度决定机制"><span>MapTask 并行度决定机制</span></a></h3><p><strong>数据块</strong>：<code>Block</code> 是 <code>HDFS</code> 物理上把数据分成一块一块，<strong>数据块是 HDFS 存储数据单位</strong></p><p><strong>数据切片</strong>：数据切片只是在逻辑上对输入进行分片，并不会在磁盘上将其切分成片进行存储。<strong>数据切片是MapReduce程序计算输入数据的单位</strong>，一个切片会对应启动一个MapTask。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>对于一个要处理的文件数据，Map框架有默认的切片大小，一般默认为<code>blocksize</code>的大小，在分配MapTask运算任务实例的时候对每一个数据切片分配一个MapTask，这样的话若一个文件的大小没有达到<code>blocksize</code>的大小的时候（比如说文件大小只有1k），那当然就会为了减少资源浪费默认分配一个MapTask。</p></div><ol><li>一个job的Map阶段有客户端在提交job时的切片数决定。</li><li>每一个数据切片分配一个MapTask实例处理。</li><li>默认情况下切片大小默认为<code>blocksize</code>。<br> （如果说不是<code>blocksize</code>的话，与DataNode中存储的数据块大小不相符，那么在MapTask阶段，就需要进行DataNode之间的数据传输，大大增加了io操作耗费的时间。）</li><li>切片时不考虑数据集整体，而是逐个针对每一个文件进行单独切片。</li></ol><h2 id="maptask-切片大小示例" tabindex="-1"><a class="header-anchor" href="#maptask-切片大小示例"><span>MapTask 切片大小示例</span></a></h2><p>例如现在有个300MB大小的文件，现在要对它进行数据切片。理论上来说，给它三等分，每份100MB比较合理，但是事实上是这样吗？</p><p>默认数据块大小是128MB，所以这个300MB大小的文件很有可能被切块后保存在三个不同的服务器上。他们的大小分别是 0-128MB、128-256MB、256-300MB</p><p>如果按照100MB大小，对这三个数据块进行切片，那么第一个数据块，也就是0-128MB的数据块就要被分成两部分，</p><p>其中第一份数据切片正常读取，第一个数据块中的0-100MB</p><p>第二片就要跨服务器读取。第一个数据块中的100-128MB的28MB数据，和第二个数据块中的128-200MB数据，这两个块里的部分数据组成一个数据切片。</p><p>第三片也要跨服务器读取。第二个数据块中的200-256MB的56MB数据，和第三个数据块中的全部44MB数据，这两个部分的数据组成一个数据切片</p><p>理论上合理的逻辑，在实际开发中涉及到了跨服务器通讯，导致效率降低。</p><p>所以这里最符合实际效果的切片大小，就是默认的128MB，也就是 <code>数据块</code> 的大小</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>数据切片是 <code>InputFormat</code> 来做的，后面会说到这里</p><p>每一个切片都会有一个MapTask来执行</p></div>',17),c=[s];function i(n,r){return t(),e("div",null,c)}const E=a(o,[["render",i],["__file","MapTask以及数据块和数据切片.html.vue"]]),M=JSON.parse('{"path":"/%E5%A4%A7%E6%95%B0%E6%8D%AE/Hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E6%A1%86%E6%9E%B6/MapReduce%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%90%E7%AE%97%E7%A8%8B%E5%BA%8F/MapTask%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%9D%97%E5%92%8C%E6%95%B0%E6%8D%AE%E5%88%87%E7%89%87.html","title":"MapTask以及数据块和数据切片","lang":"zh-CN","frontmatter":{"title":"MapTask以及数据块和数据切片","order":30,"description":"MapTask MapTask指的是在MapReduce运行过程中为每一个数据切片分配的数据运算实例任务。MapTask的并行度也就指的是运算任务实例的数量，影响整个job的处理速度。 MapTask 并行度决定机制 数据块：Block 是 HDFS 物理上把数据分成一块一块，数据块是 HDFS 存储数据单位 数据切片：数据切片只是在逻辑上对输入进行分...","head":[["meta",{"property":"og:url","content":"https://mahe666.github.io/doc/%E5%A4%A7%E6%95%B0%E6%8D%AE/Hadoop%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E6%A1%86%E6%9E%B6/MapReduce%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%90%E7%AE%97%E7%A8%8B%E5%BA%8F/MapTask%E4%BB%A5%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%9D%97%E5%92%8C%E6%95%B0%E6%8D%AE%E5%88%87%E7%89%87.html"}],["meta",{"property":"og:site_name","content":"Mahe666"}],["meta",{"property":"og:title","content":"MapTask以及数据块和数据切片"}],["meta",{"property":"og:description","content":"MapTask MapTask指的是在MapReduce运行过程中为每一个数据切片分配的数据运算实例任务。MapTask的并行度也就指的是运算任务实例的数量，影响整个job的处理速度。 MapTask 并行度决定机制 数据块：Block 是 HDFS 物理上把数据分成一块一块，数据块是 HDFS 存储数据单位 数据切片：数据切片只是在逻辑上对输入进行分..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-16T11:31:59.000Z"}],["meta",{"property":"article:author","content":"Mahe666"}],["meta",{"property":"article:modified_time","content":"2024-06-16T11:31:59.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MapTask以及数据块和数据切片\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-06-16T11:31:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mahe666\\"}]}"]]},"headers":[{"level":2,"title":"MapTask","slug":"maptask","link":"#maptask","children":[{"level":3,"title":"MapTask 并行度决定机制","slug":"maptask-并行度决定机制","link":"#maptask-并行度决定机制","children":[]}]},{"level":2,"title":"MapTask 切片大小示例","slug":"maptask-切片大小示例","link":"#maptask-切片大小示例","children":[]}],"git":{"createdTime":1718534722000,"updatedTime":1718537519000,"contributors":[{"name":"mahe666","email":"m13234666930@163.com","commits":1}]},"filePathRelative":"大数据/Hadoop分布式存储框架/MapReduce分布式运算程序/MapTask以及数据块和数据切片.md","localizedDate":"2024年6月16日","autoDesc":true}');export{E as comp,M as data};
