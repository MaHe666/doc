<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<meta name="qrichtext" content="1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
p, li { white-space: pre-wrap; }
</style>
</head>
<body style="font-family:'微软雅黑'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="margin:0px;">如果一个异常在 try 子句里（或者在 except 和 else 子句里）被抛出，而又没有任何的 except 把它截住，那么这个异常会在 finally 子句执行后被抛出。</p>
<p style="margin:0px;">下面是一个更加复杂的例子（在同一个 try 语句里包含 except 和 finally 子句）:</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">&gt;&gt;&gt; def divide(x, y):</p>
<p style="margin:0px;">        try:</p>
<p style="margin:0px;">            result = x / y</p>
<p style="margin:0px;">        except ZeroDivisionError:</p>
<p style="margin:0px;">            <span style=" font-weight:600; color:#204a87;">print</span>(<span style=" font-weight:600; color:#2e8b57;">&quot;division by zero!&quot;</span>)</p>
<p style="margin:0px;">        else:</p>
<p style="margin:0px;">            <span style=" font-weight:600; color:#204a87;">print</span>(<span style=" font-weight:600; color:#2e8b57;">&quot;result is&quot;</span>, result)</p>
<p style="margin:0px;">        finally:</p>
<p style="margin:0px;">            <span style=" font-weight:600; color:#204a87;">print</span>(<span style=" font-weight:600; color:#2e8b57;">&quot;executing finally clause&quot;</span>)</p>
<p style="margin:0px;">   </p>
<p style="margin:0px;">&gt;&gt;&gt; divide(<span style=" font-weight:600; color:#4682b4;">2</span>, <span style=" font-weight:600; color:#4682b4;">1</span>)</p>
<p style="margin:0px;">result is 2.0</p>
<p style="margin:0px;">executing finally clause</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">&gt;&gt;&gt; divide(<span style=" font-weight:600; color:#4682b4;">2</span>, <span style=" font-weight:600; color:#4682b4;">0</span>)</p>
<p style="margin:0px;">division by zero!</p>
<p style="margin:0px;">executing finally clause</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">&gt;&gt;&gt; divide(<span style=" font-weight:600; color:#2e8b57;">&quot;2&quot;</span>, <span style=" font-weight:600; color:#2e8b57;">&quot;1&quot;</span>)</p>
<p style="margin:0px;">executing finally clause</p>
<p style="margin:0px;">Traceback (most recent call last):</p>
<p style="margin:0px;">  File <span style=" font-weight:600; color:#2e8b57;">&quot;&lt;stdin&gt;&quot;</span>, line <span style=" font-weight:600; color:#4682b4;">1</span>, in ?</p>
<p style="margin:0px;">  File <span style=" font-weight:600; color:#2e8b57;">&quot;&lt;stdin&gt;&quot;</span>, line <span style=" font-weight:600; color:#4682b4;">3</span>, in divide</p>
<p style="margin:0px;">TypeError: unsupported operand <span style=" font-weight:600; color:#204a87;">type</span>(s) for /: 'str' and 'str'</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">预定义的清理行为</p>
<p style="margin:0px;">一些对象定义了标准的清理行为，无论系统是否成功的使用了它，一旦不需要它了，那么这个标准的清理行为就会执行。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">这面这个例子展示了尝试打开一个文件，然后把内容打印到屏幕上:</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">for line in open(&quot;myfile.txt&quot;):</p>
<p style="margin:0px;">    <span style=" font-weight:600; color:#204a87;">print</span>(line, end=<span style=" font-weight:600; color:#2e8b57;">&quot;&quot;</span>)</p>
<p style="margin:0px;">以上这段代码的问题是，当执行完毕后，文件会保持打开状态，并没有被关闭。</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">关键词 with 语句就可以保证诸如文件之类的对象在使用完之后一定会正确的执行他的清理方法:</p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">with open(&quot;myfile.txt&quot;) as f:</p>
<p style="margin:0px;">    for line in f:</p>
<p style="margin:0px;">        <span style=" font-weight:600; color:#204a87;">print</span>(line, end=<span style=" font-weight:600; color:#2e8b57;">&quot;&quot;</span>)</p>
<p style="margin:0px;">以上这段代码执行完毕后，就算在处理过程中出问题了，文件 f 总是会关闭。</p>

<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body>
</html>