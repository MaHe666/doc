<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<meta name="qrichtext" content="1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
p, li { white-space: pre-wrap; }
</style>
</head>
<body style="font-family:'微软雅黑'; font-size:11pt; font-weight:400; font-style:normal;">
<p style="margin:0px;">一般来说，实例变量用于每个实例的唯一数据，而类变量用于类的所有实例共享的属性和方法:</p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">class</span><span style="font-family:'Courier';"> Dog:</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    kind = </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'canine'</span><span style="font-family:'Courier';">         </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># class variable shared by all instances</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> __init__(</span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier';">, name):</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">name = name    </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># instance variable unique to each instance</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Fido'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Buddy'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">kind                  </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># shared by all dogs</span></p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'canine'</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">kind                  </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># shared by all dogs</span></p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'canine'</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">name                  </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># unique to d</span></p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Fido'</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">name                  </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># unique to e</span></p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Buddy'</span></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">正如之前已讨论过的，共享数据可能在涉及 mutable 对象例如列表和字典的时候导致令人惊讶的结果。 例如以下代码中的 tricks 列表不应该被用作类变量，因为所有的 Dog 实例将只共享一个单独的列表:</p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">class</span><span style="font-family:'Courier';"> Dog:</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    tricks = []             </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># mistaken use of a class variable</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> __init__(</span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier';">, name):</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">name = name</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier';">, trick):</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">append(trick)</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Fido'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Buddy'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'roll over'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'play dead'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks                </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># unexpectedly shared by all dogs</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">[</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'roll over'</span><span style="font-family:'Courier';">, </span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'play dead'</span><span style="font-family:'Courier';">]</span></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="margin:0px;">正确的类设计应该使用实例变量:</p>
<p style="margin:0px;"><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">class</span><span style="font-family:'Courier';"> Dog:</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> __init__(</span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier';">, name):</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">name = name</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks = []    </span><span style="font-family:'Courier'; font-style:italic; color:#778899;"># creates a new empty list for each dog</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">    </span><span style="font-family:'Courier'; font-weight:600; color:#8b008b;">def</span><span style="font-family:'Courier';"> add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier';">, trick):</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">        </span><span style="font-family:'Courier'; font-weight:600; color:#204a87;">self</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">append(trick)</span></p>
<p style="-qt-paragraph-type:empty; margin:0px; font-family:'Courier';"><br /></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Fido'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e = Dog(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'Buddy'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'roll over'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">add_trick(</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'play dead'</span><span style="font-family:'Courier';">)</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; d</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">[</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'roll over'</span><span style="font-family:'Courier';">]</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">&gt;&gt;&gt; e</span><span style="font-family:'Courier'; font-weight:600; color:#4682b4;">.</span><span style="font-family:'Courier';">tricks</span></p>
<p style="margin:0px;"><span style="font-family:'Courier';">[</span><span style="font-family:'Courier'; font-weight:600; color:#2e8b57;">'play dead'</span><span style="font-family:'Courier';">]</span></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>
<p style="-qt-paragraph-type:empty; margin:0px;"><br /></p>

<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script></body>
</html>